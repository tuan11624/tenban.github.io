<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quáº£n LÃ½ Thá»i Gian Sinh ViÃªn</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; }
    .page { display: none; }
    .page.active { display: block; }
    .menu-hidden { opacity: 0; pointer-events: none; }
    .menu-visible { opacity: 1; pointer-events: auto; }
    .event-card { transition: transform 0.2s, opacity 0.3s; }
    .event-card:hover { transform: scale(1.05); }
    .event-card.new { animation: slideIn 0.5s; }
    @keyframes slideIn { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    @keyframes blink { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(0.1); } }
    @keyframes wagTail { 0%, 100% { transform: rotate(5deg); } 50% { transform: rotate(-5deg); } }
    @keyframes typing { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    #chatbot-img { animation: blink 2s infinite, wagTail 1s infinite; }
    #calendarList { max-height: 300px; overflow-y: auto; }
    .popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 1000; }
    .popup.show { display: block; }
    .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; }
    .overlay.show { display: block; }
    .spinner { animation: spin 1s linear infinite; display: inline-block; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .intro-img { transition: transform 0.3s; }
    .intro-img:hover { transform: scale(1.05); }
    .typing-indicator { display: inline-block; }
    .typing-indicator span { animation: typing 0.5s infinite; }
    .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
    .fc-daygrid-event:hover { transform: scale(1.1); transition: transform 0.2s; }
    .services-section h3 { font-size: 1.1rem; }
    .services-section p, .services-section label, .services-section select, .services-section input, .services-section textarea, .services-section button { font-size: 0.85rem; }
    .services-section .grid { gap: 2rem; }
    .services-section .p-6 { padding: 2rem; }
    .toggle-hidden { display: none; }
    .toggle-visible { display: block; }
  </style>
</head>
<body class="bg-pink-50">
  <!-- Header -->
  <header class="bg-blue-500 text-white p-4 sticky top-0 z-20 flex items-center justify-between">
    <div class="flex items-center">
      <button id="menuToggle" class="text-2xl mr-4">â˜°</button>
      <img src="https://www.utc2.edu.vn/images/logo_utc2.png" alt="Logo UTH" class="w-12 h-12" onerror="this.src='https://via.placeholder.com/48?text=Logo'">
      <h1 class="text-2xl font-bold ml-2">Quáº£n LÃ½ Thá»i Gian</h1>
    </div>
  </header>

  <!-- Menu áº©n -->
  <nav id="menu" class="bg-white w-64 fixed h-full shadow-lg z-10 transition-opacity duration-300 menu-hidden">
    <ul class="flex flex-col p-4">
      <li><a href="#" onclick="showPage('home')" class="block py-2 px-4 text-blue-600 hover:bg-blue-100 rounded">Trang chá»§</a></li>
      <li><a href="#" onclick="showPage('services')" class="block py-2 px-4 text-blue-600 hover:bg-blue-100 rounded">Dá»‹ch vá»¥</a></li>
      <li><a href="#" onclick="showPage('consulting')" class="block py-2 px-4 text-blue-600 hover:bg-blue-100 rounded">TÆ° váº¥n</a></li>
      <li><a href="#" onclick="showPage('contact')" class="block py-2 px-4 text-blue-600 hover:bg-blue-100 rounded">LiÃªn há»‡</a></li>
    </ul>
  </nav>

  <!-- Ná»™i dung chÃ­nh -->
  <main class="p-8">
    <!-- Trang chá»§ -->
    <section id="home" class="page active">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ChÃ o má»«ng báº¡n!</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <img src="https://images.unsplash.com/photo-1523240795612-9a054b0db644?q=80&w=400&auto=format&fit=crop" alt="Sinh viÃªn há»c nhÃ³m" class="w-full h-48 object-cover rounded-lg intro-img" loading="lazy" onerror="this.src='https://via.placeholder.com/400x256?text=Image+Error'">
            <img src="https://images.unsplash.com/photo-1511632765486-a01980e01df4?q=80&w=400&auto=format&fit=crop" alt="Sinh viÃªn thÆ° giÃ£n" class="w-full h-48 object-cover rounded-lg mt-4 intro-img" loading="lazy" onerror="this.src='https://via.placeholder.com/400x256?text=Image+Error'">
            <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=400&auto=format&fit=crop" alt="Sinh viÃªn viáº¿t káº¿ hoáº¡ch" class="w-full h-48 object-cover rounded-lg mt-4 intro-img" loading="lazy" onerror="this.src='https://via.placeholder.com/400x256?text=Image+Error'">
          </div>
          <div>
            <img src="https://images.unsplash.com/photo-1503676260728-9541f71385b5?q=80&w=400&auto=format&fit=crop" alt="Sinh viÃªn ghi chÃº" class="w-full h-48 object-cover rounded-lg intro-img" loading="lazy" onerror="this.src='https://via.placeholder.com/400x256?text=Image+Error'">
            <img src="https://images.unsplash.com/photo-1456513080510-5a20856a2d6d?q=80&w=400&auto=format&fit=crop" alt="Sinh viÃªn Ä‘á»c sÃ¡ch" class="w-full h-48 object-cover rounded-lg mt-4 intro-img" loading="lazy" onerror="this.src='https://via.placeholder.com/400x256?text=Image+Error'">
          </div>
        </div>
        <div>
          <h3 class="text-xl font-semibold text-gray-800">Giá»›i thiá»‡u</h3>
          <p class="mt-2 text-gray-600">Trang web nÃ y giÃºp sinh viÃªn quáº£n lÃ½ thá»i gian hiá»‡u quáº£, tá»« há»c táº­p, lÃ m viá»‡c nhÃ³m Ä‘áº¿n thÆ° giÃ£n. CÃ´ng cá»¥ miá»…n phÃ­ vÃ  tÆ° váº¥n thÃ¢n thiá»‡n sáº½ Ä‘á»“ng hÃ nh cÃ¹ng báº¡n!</p>
          <h3 class="text-xl font-semibold text-gray-800 mt-4">Quáº£n lÃ½ thá»i gian lÃ  gÃ¬?</h3>
          <p class="mt-2 text-gray-600">LÃ  ká»¹ nÄƒng láº­p káº¿ hoáº¡ch, phÃ¢n bá»• thá»i gian há»£p lÃ½ Ä‘á»ƒ hoÃ n thÃ nh cÃ´ng viá»‡c. Äiá»u nÃ y giÃºp báº¡n há»c táº­p hiá»‡u quáº£, giáº£m cÄƒng tháº³ng vÃ  táº­n hÆ°á»Ÿng cuá»™c sá»‘ng.</p>
          <h3 class="text-xl font-semibold text-gray-800 mt-4">Lá»£i Ã­ch</h3>
          <ul class="mt-2 text-gray-600 list-disc pl-5">
            <li>NÃ¢ng cao nÄƒng suáº¥t há»c táº­p.</li>
            <li>Giáº£m Ã¡p lá»±c tá»« deadline.</li>
            <li>CÃ¢n báº±ng giá»¯a há»c vÃ  chÆ¡i.</li>
            <li>PhÃ¡t triá»ƒn ká»· luáº­t báº£n thÃ¢n.</li>
          </ul>
          <h3 class="text-xl font-semibold text-gray-800 mt-4">Æ¯u vÃ  nhÆ°á»£c Ä‘iá»ƒm</h3>
          <p class="mt-2 text-gray-600"><strong>Æ¯u Ä‘iá»ƒm:</strong> Miá»…n phÃ­, dá»… dÃ¹ng, linh hoáº¡t.<br><strong>NhÆ°á»£c Ä‘iá»ƒm:</strong> Cáº§n kiÃªn trÃ¬ Ä‘á»ƒ duy trÃ¬ thÃ³i quen.</p>
          <h3 class="text-xl font-semibold text-gray-800 mt-4">Máº¹o quáº£n lÃ½ thá»i gian</h3>
          <ul class="mt-2 text-gray-600 list-disc pl-5">
            <li>Sá»­ dá»¥ng quy táº¯c 80/20: 20% cÃ´ng viá»‡c táº¡o 80% káº¿t quáº£.</li>
            <li>Ãp dá»¥ng Pomodoro: Há»c 25 phÃºt, nghá»‰ 5 phÃºt.</li>
            <li>Æ¯u tiÃªn viá»‡c quan trá»ng (Ma tráº­n Eisenhower).</li>
            <li>Ghi chÃº hÃ ng ngÃ y Ä‘á»ƒ theo dÃµi tiáº¿n Ä‘á»™.</li>
            <li>Äáº·t má»¥c tiÃªu nhá» má»—i ngÃ y Ä‘á»ƒ duy trÃ¬ Ä‘á»™ng lá»±c.</li>
          </ul>
          <h3 class="text-xl font-semibold text-gray-800 mt-4">TrÃ­ch dáº«n truyá»n cáº£m há»©ng</h3>
          <p class="mt-2 text-gray-600 italic">â€œThá»i gian lÃ  vÃ ng, hÃ£y biáº¿n nÃ³ thÃ nh kim cÆ°Æ¡ng!â€</p>
          <p class="mt-2 text-gray-600 italic">â€œMá»—i ngÃ y lÃ  má»™t cÆ¡ há»™i Ä‘á»ƒ tiáº¿n gáº§n hÆ¡n Ä‘áº¿n Æ°á»›c mÆ¡!â€</p>
          <p class="mt-2 text-gray-600 italic">â€œHÃ£y báº¯t Ä‘áº§u tá»« nhá»¯ng bÆ°á»›c nhá», thÃ nh cÃ´ng sáº½ Ä‘áº¿n!â€</p>
        </div>
      </div>
    </section>

    <!-- Dá»‹ch vá»¥ -->
    <section id="services" class="page">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">Lá»‹ch Sinh ViÃªn Dá»… ThÆ°Æ¡ng</h2>
      <div class="bg-white p-6 rounded-lg shadow-md services-section">
        <h3 class="font-semibold text-gray-800">Táº¡o sá»± kiá»‡n má»›i</h3>
        <p class="mt-2 text-gray-600">ThÃªm cÃ´ng viá»‡c, há»c táº­p hoáº·c hoáº¡t Ä‘á»™ng cÃ¡ nhÃ¢n vá»›i má»©c Ä‘á»™ Æ°u tiÃªn. Há»‡ thá»‘ng sáº½ cáº£nh bÃ¡o náº¿u lá»‹ch bá»‹ trÃ¹ng!</p>
        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <input id="eventName" type="text" class="w-full p-2 border rounded" placeholder="TÃªn sá»± kiá»‡n...">
            <input id="eventTime" type="datetime-local" class="w-full p-2 border rounded mt-2">
            <select id="eventPriority" class="w-full p-2 border rounded mt-2">
              <option value="bg-red-500">Gáº¤P</option>
              <option value="bg-yellow-400">Cáº¦N CHUáº¨N Bá»Š</option>
              <option value="bg-green-400">CHÆ¯A Gáº¤P</option>
            </select>
            <textarea id="eventNote" class="w-full p-2 border rounded mt-2" placeholder="Ghi chÃº (vÃ­ dá»¥: Chuáº©n bá»‹ tÃ i liá»‡u)"></textarea>
            <button onclick="addEvent()" class="mt-2 bg-blue-500 text-white p-2 rounded flex items-center"><span class="mr-2 spinner">â³</span>ThÃªm sá»± kiá»‡n</button>
          </div>
          <div>
            <h4 class="text-lg font-semibold text-gray-800">Lá»‹ch cá»§a báº¡n</h4>
            <div id="calendar" class="mt-2"></div>
            <div class="flex justify-between mt-4">
              <button onclick="toggleEventList()" class="bg-blue-300 text-white p-2 rounded flex items-center">
                <span class="mr-2">ğŸ“…</span> Danh sÃ¡ch sá»± kiá»‡n
              </button>
              <button onclick="toggleOptions()" class="bg-blue-300 text-white p-2 rounded flex items-center">
                <span class="mr-2">âš™ï¸</span> TÃ¹y chá»n
              </button>
            </div>
            <div id="eventOptions" class="toggle-hidden mt-2">
              <div class="flex justify-between mb-2">
                <button onclick="sortEvents('time')" class="bg-blue-300 text-white p-2 rounded">Sáº¯p xáº¿p theo thá»i gian</button>
                <button onclick="sortEvents('priority')" class="bg-blue-300 text-white p-2 rounded">Sáº¯p xáº¿p theo Æ°u tiÃªn</button>
              </div>
              <div class="flex justify-between">
                <select id="filterPriority" onchange="filterEvents()" class="p-2 border rounded">
                  <option value="all">Táº¥t cáº£</option>
                  <option value="bg-red-500">Gáº¤P</option>
                  <option value="bg-yellow-400">Cáº¦N CHUáº¨N Bá»Š</option>
                  <option value="bg-green-400">CHÆ¯A Gáº¤P</option>
                </select>
                <button onclick="clearEvents()" class="bg-red-500 text-white p-2 rounded">XÃ³a táº¥t cáº£</button>
              </div>
            </div>
            <div id="calendarList" class="toggle-hidden mt-2"></div>
          </div>
        </div>
      </div>
      <div id="overlay" class="overlay"></div>
      <div id="popup" class="popup">
        <p class="text-red-500">Lá»‹ch bá»‹ trÃ¹ng! Vui lÃ²ng chá»n thá»i gian khÃ¡c.</p>
        <button onclick="closePopup()" class="mt-2 bg-blue-500 text-white p-2 rounded">ÄÃ³ng</button>
      </div>
    </section>

    <!-- TÆ° váº¥n -->
    <section id="consulting" class="page">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">Há»i MÃ¨o Thá»i Gian!</h2>
      <div class="bg-white p-6 rounded-lg shadow-md flex">
        <img id="chatbot-img" src="https://images.unsplash.com/photo-1573865526739-10659fec78a5?q=80&w=100&auto=format&fit=crop" alt="MÃ¨o dá»… thÆ°Æ¡ng" class="w-24 h-24 rounded-full mr-4 transition-transform hover:scale-110" loading="lazy" onerror="this.src='https://via.placeholder.com/100?text=Cat'">
        <div class="flex-1">
          <p class="text-gray-600 mb-2">Meo meo! MÃ¬nh lÃ  MÃ¨o Thá»i Gian, báº¡n cá»© nÃ³i nhá»¯ng gÃ¬ Ä‘ang lo láº¯ng, mÃ¬nh sáº½ giÃºp nhÃ©! ğŸ˜º Báº¡n Ä‘ang báº­n, cÄƒng tháº³ng hay cáº§n láº­p káº¿ hoáº¡ch?</p>
          <div class="flex flex-wrap gap-2 mb-4">
            <button onclick="quickQuestion('Tá»™i báº­n quÃ¡!')" class="bg-pink-300 text-white p-2 rounded">Tá»™i báº­n quÃ¡!</button>
            <button onclick="quickQuestion('Tá»™i cÄƒng tháº³ng!')" class="bg-blue-300 text-white p-2 rounded">Tá»™i cÄƒng tháº³ng!</button>
            <button onclick="quickQuestion('CÃ¢n báº±ng há»c & chÆ¡i?')" class="bg-purple-300 text-white p-2 rounded">CÃ¢n báº±ng há»c & chÆ¡i?</button>
            <button onclick="quickQuestion('Tá»™i má»‡t má»i!')" class="bg-yellow-300 text-white p-2 rounded">Tá»™i má»‡t má»i!</button>
            <button onclick="quickQuestion('Tá»™i cáº§n káº¿ hoáº¡ch há»c!')" class="bg-green-300 text-white p-2 rounded">Cáº§n káº¿ hoáº¡ch há»c!</button>
            <button onclick="quickQuestion('Tá»™i cáº§n Ä‘á»™ng lá»±c!')" class="bg-orange-300 text-white p-2 rounded">Cáº§n Ä‘á»™ng lá»±c!</button>
            <button onclick="quickQuestion('Tá»™i khÃ´ng táº­p trung!')" class="bg-teal-300 text-white p-2 rounded">KhÃ´ng táº­p trung!</button>
            <button onclick="quickQuestion('Tá»™i cáº§n giáº£i phÃ¡p há»c táº­p!')" class="bg-indigo-300 text-white p-2 rounded">Giáº£i phÃ¡p há»c táº­p!</button>
            <button onclick="quickQuestion('Tá»™i cáº§n giáº£i phÃ¡p giáº£m cÄƒng tháº³ng!')" class="bg-red-300 text-white p-2 rounded">Giáº£i phÃ¡p giáº£m cÄƒng tháº³ng!</button>
            <button onclick="quickQuestion('Tá»™i lo láº¯ng thi cá»­!')" class="bg-gray-300 text-white p-2 rounded">Lo láº¯ng thi cá»­!</button>
            <button onclick="quickQuestion('Tá»™i cáº§n giáº£i phÃ¡p quáº£n lÃ½ thá»i gian!')" class="bg-pink-500 text-white p-2 rounded">Giáº£i phÃ¡p quáº£n lÃ½ thá»i gian!</button>
          </div>
          <div id="chatbox" class="h-64 overflow-y-auto mb-4 p-2 border rounded"></div>
          <input id="userInput" type="text" class="w-full p-2 border rounded" placeholder="Há»i mÃ¬nh báº¥t cá»© Ä‘iá»u gÃ¬ nhÃ©!">
          <button onclick="sendMessage()" class="mt-2 bg-blue-500 text-white p-2 rounded">Gá»­i</button>
        </div>
      </div>
    </section>

    <!-- LiÃªn há»‡ -->
    <section id="contact" class="page">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">LiÃªn há»‡ vá»›i chÃºng tÃ´i</h2>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <p class="text-gray-600"><strong>Email:</strong> <a href="mailto:nhttuan092509@gmail.com">nhttuan092509@gmail.com</a></p>
        <p class="text-gray-600"><strong>Sá»‘ Ä‘iá»‡n thoáº¡i:</strong> 098888888</p>
        <h3 class="text-xl font-semibold text-gray-800 mt-4">Äá»ƒ láº¡i lá»i nháº¯n</h3>
        <textarea id="feedbackInput" class="w-full p-2 border rounded mt-2" placeholder="Lá»i nháº¯n cá»§a báº¡n..."></textarea>
        <select id="feedbackRating" class="w-full p-2 border rounded mt-2">
          <option value="positive">HÃ i lÃ²ng</option>
          <option value="neutral">BÃ¬nh thÆ°á»ng</option>
          <option value="negative">ChÆ°a hÃ i lÃ²ng</option>
        </select>
        <button onclick="submitFeedback()" class="mt-2 bg-blue-500 text-white p-2 rounded">Gá»­i</button>
        <div id="recentFeedback" class="mt-4"></div>
        <canvas id="feedbackChart" class="mt-4"></canvas>
      </div>
    </section>
  </main>

  <script>
    // Menu áº©n/hiá»‡n
    const menuToggle = document.getElementById('menuToggle');
    const menu = document.getElementById('menu');
    menuToggle.addEventListener('click', () => {
      menu.classList.toggle('menu-hidden');
      menu.classList.toggle('menu-visible');
    });

    // Chuyá»ƒn trang
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      menu.classList.add('menu-hidden');
      menu.classList.remove('menu-visible');
      if (pageId === 'services') {
        calendar.render();
      }
      if (pageId === 'consulting') {
        document.getElementById('chatbox').innerHTML = '<p><strong>MÃ¨o Thá»i Gian:</strong> Meo meo! MÃ¬nh lÃ  MÃ¨o Thá»i Gian, báº¡n cá»© nÃ³i nhá»¯ng gÃ¬ Ä‘ang lo láº¯ng, mÃ¬nh sáº½ giÃºp nhÃ©! ğŸ˜º Báº¡n Ä‘ang báº­n, cÄƒng tháº³ng hay cáº§n láº­p káº¿ hoáº¡ch?</p>';
      }
    }
    showPage('home');

    // Quáº£n lÃ½ sá»± kiá»‡n
    let events = JSON.parse(localStorage.getItem('events')) || [];
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      height: 'auto',
      events: events.map(event => ({
        title: event.name,
        start: event.time,
        backgroundColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
        borderColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
        extendedProps: { note: event.note }
      })),
      eventClick: function(info) {
        if (confirm(`XÃ³a sá»± kiá»‡n "${info.event.title}"?`)) {
          events = events.filter(e => e.time !== info.event.startStr);
          localStorage.setItem('events', JSON.stringify(events));
          info.event.remove();
          renderCalendarList();
        }
      }
    });
    calendar.render();

    function addEvent() {
      const name = document.getElementById('eventName').value;
      const time = document.getElementById('eventTime').value;
      const priority = document.getElementById('eventPriority').value;
      const note = document.getElementById('eventNote').value;
      if (!name || !time) {
        showPopup('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin!');
        return;
      }

      const conflict = events.some(event => event.time === time);
      if (conflict) {
        showPopup('Lá»‹ch bá»‹ trÃ¹ng! Vui lÃ²ng chá»n thá»i gian khÃ¡c.');
        return;
      }

      events.push({ name, time, priority, note });
      localStorage.setItem('events', JSON.stringify(events));
      calendar.getEvents().forEach(event => event.remove());
      events.forEach(event => {
        calendar.addEvent({
          title: event.name,
          start: event.time,
          backgroundColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
          borderColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
          extendedProps: { note: event.note }
        });
      });
      renderCalendarList();
      document.getElementById('eventName').value = '';
      document.getElementById('eventTime').value = '';
      document.getElementById('eventNote').value = '';
    }

    function showPopup(message) {
      document.getElementById('popup').innerHTML = `
        <p class="text-red-500">${message}</p>
        <button onclick="closePopup()" class="mt-2 bg-blue-500 text-white p-2 rounded">ÄÃ³ng</button>
      `;
      document.getElementById('popup').classList.add('show');
      document.getElementById('overlay').classList.add('show');
    }

    function closePopup() {
      document.getElementById('popup').classList.remove('show');
      document.getElementById('overlay').classList.remove('show');
    }

    function renderCalendarList() {
      const calendarList = document.getElementById('calendarList');
      const filterPriority = document.getElementById('filterPriority').value;
      calendarList.innerHTML = '';
      let filteredEvents = events;
      if (filterPriority !== 'all') {
        filteredEvents = events.filter(event => event.priority === filterPriority);
      }
      filteredEvents.slice(0, 20).forEach((event, index) => {
        const div = document.createElement('div');
        div.className = `event-card p-3 rounded ${event.priority} text-white flex justify-between items-center shadow-lg new`;
        div.innerHTML = `
          <div>
            <span class="mr-2">${event.priority === 'bg-red-500' ? 'ğŸš¨' : event.priority === 'bg-yellow-400' ? 'ğŸ“' : 'ğŸŒŸ'}</span> 
            ${event.name} (${event.priority === 'bg-red-500' ? 'Gáº¤P' : event.priority === 'bg-yellow-400' ? 'Cáº¦N CHUáº¨N Bá»Š' : 'CHÆ¯A Gáº¤P'}) - ${new Date(event.time).toLocaleString()}
            ${event.note ? `<br><small>Ghi chÃº: ${event.note}</small>` : ''}
          </div>
          <button onclick="deleteEvent(${index})" class="bg-gray-700 text-white p-1 rounded">âœ•</button>
        `;
        calendarList.appendChild(div);
      });
    }

    function deleteEvent(index) {
      events.splice(index, 1);
      localStorage.setItem('events', JSON.stringify(events));
      calendar.getEvents().forEach(event => event.remove());
      events.forEach(event => {
        calendar.addEvent({
          title: event.name,
          start: event.time,
          backgroundColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
          borderColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
          extendedProps: { note: event.note }
        });
      });
      renderCalendarList();
    }

    function sortEvents(criteria) {
      if (criteria === 'time') {
        events.sort((a, b) => new Date(a.time) - new Date(b.time));
      } else if (criteria === 'priority') {
        const priorityOrder = { 'bg-red-500': 1, 'bg-yellow-400': 2, 'bg-green-400': 3 };
        events.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);
      }
      localStorage.setItem('events', JSON.stringify(events));
      calendar.getEvents().forEach(event => event.remove());
      events.forEach(event => {
        calendar.addEvent({
          title: event.name,
          start: event.time,
          backgroundColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
          borderColor: event.priority === 'bg-red-500' ? '#EF4444' : event.priority === 'bg-yellow-400' ? '#FBBF24' : '#34D399',
          extendedProps: { note: event.note }
        });
      });
      renderCalendarList();
    }

    function filterEvents() {
      renderCalendarList();
    }

    function clearEvents() {
      if (confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a táº¥t cáº£ sá»± kiá»‡n?')) {
        events = [];
        localStorage.setItem('events', JSON.stringify(events));
        calendar.getEvents().forEach(event => event.remove());
        renderCalendarList();
      }
    }

    function toggleEventList() {
      const eventList = document.getElementById('calendarList');
      eventList.classList.toggle('toggle-hidden');
      eventList.classList.toggle('toggle-visible');
      renderCalendarList();
    }

    function toggleOptions() {
      const options = document.getElementById('eventOptions');
      options.classList.toggle('toggle-hidden');
      options.classList.toggle('toggle-visible');
    }

    // Chatbot cáº£i tiáº¿n
    let chatHistory = [];
    let currentTopic = '';
    let lastSuggestion = '';
    const responses = {
      greeting: ['Meo meo! MÃ¬nh lÃ  MÃ¨o Thá»i Gian, báº¡n cá»© nÃ³i nhá»¯ng gÃ¬ Ä‘ang lo láº¯ng, mÃ¬nh sáº½ giÃºp nhÃ©! ğŸ˜º Báº¡n Ä‘ang báº­n, cÄƒng tháº³ng hay cáº§n láº­p káº¿ hoáº¡ch?'],
      busy: [
        'Meow! Báº¡n báº­n rá»™n quÃ¡ nhá»‰? ğŸ˜¿ Sao khÃ´ng thá»­ chia nhá» cÃ´ng viá»‡c vÃ  lÃ m tá»«ng pháº§n má»™t? Cáº£m giÃ¡c sáº½ nháº¹ nhÃ ng hÆ¡n Ä‘Ã³!',
        'MÃ¨o Ä‘Ã¢y! Nghe báº¡n báº­n dá»¯ ha! ğŸ˜º HÃ£y thá»­ dÃ¹ng Ma tráº­n Eisenhower Ä‘á»ƒ Æ°u tiÃªn viá»‡c quan trá»ng trÆ°á»›c nhÃ©!'
      ],
      busyAlt: [
        'Meo meo! Náº¿u cÃ¡ch trÆ°á»›c khÃ´ng há»£p, báº¡n thá»­ Ä‘áº·t háº¹n giá» 25 phÃºt lÃ m viá»‡c, 5 phÃºt nghá»‰ (Pomodoro) xem sao? ğŸ˜º',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ táº¯t háº¿t thÃ´ng bÃ¡o Ä‘iá»‡n thoáº¡i Ä‘á»ƒ táº­p trung hÆ¡n nhÃ©? ğŸ˜º Cáº£m giÃ¡c tháº¿ nÃ o?'
      ],
      stress: [
        'Meow! Nghe báº¡n cÄƒng tháº³ng quÃ¡, mÃ¬nh á»Ÿ Ä‘Ã¢y nÃ¨! ğŸ˜º Sao khÃ´ng thá»­ hÃ­t thá»Ÿ sÃ¢u: hÃ­t 4 giÃ¢y, giá»¯ 7 giÃ¢y, thá»Ÿ ra 8 giÃ¢y? Cáº£m giÃ¡c nháº¹ nhÃ ng hÆ¡n chÆ°a?',
        'MÃ¨o Ä‘Ã¢y! Báº¡n Ã¡p lá»±c quÃ¡ háº£? ğŸ˜¿ HÃ£y thá»­ Ä‘i dáº¡o 10 phÃºt Ä‘á»ƒ Ä‘áº§u Ã³c thÆ° giÃ£n nhÃ©!'
      ],
      stressAlt: [
        'Meo meo! Náº¿u tháº¿ chÆ°a á»•n, báº¡n thá»­ nghe má»™t báº£n nháº¡c nháº¹ nhÃ ng xem? ğŸ˜º CÃ³ tháº¥y dá»… chá»‹u hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ viáº¿t cáº£m xÃºc ra giáº¥y Ä‘á»ƒ giáº£i tá»a nhÃ©? ğŸ˜º Cáº£m giÃ¡c tháº¿ nÃ o?'
      ],
      balance: [
        'Meow! CÃ¢n báº±ng há»c vÃ  chÆ¡i háº£? ğŸ˜º HÃ£y thá»­ chia thá»i gian: 60% há»c, 20% chÆ¡i, 20% nghá»‰. Báº¡n tháº¥y há»£p khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Báº¡n muá»‘n cÃ¢n báº±ng tá»‘t hÆ¡n Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng Ä‘áº·t lá»‹ch cá»‘ Ä‘á»‹nh: há»c 2 tiáº¿ng rá»“i thÆ° giÃ£n 30 phÃºt?'
      ],
      balanceAlt: [
        'Meo meo! Náº¿u chÆ°a há»£p, báº¡n thá»­ tá»± thÆ°á»Ÿng sau khi há»c xong, nhÆ° xem phim 20 phÃºt? ğŸ˜º CÃ³ á»•n hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ xen káº½ há»c vÃ  chÆ¡i: 1 tiáº¿ng há»c, 15 phÃºt chÆ¡i, Ä‘á»ƒ Ä‘á»¡ chÃ¡n nhÃ©? ğŸ˜º'
      ],
      tired: [
        'Meow! Báº¡n má»‡t má»i háº£? Nghá»‰ chÃºt Ä‘i, báº¡n xá»©ng Ä‘Ã¡ng mÃ ! ğŸ˜º Thá»­ ngá»§ ngáº¯n 15-20 phÃºt (power nap) nhÃ©?',
        'MÃ¨o Ä‘Ã¢y! Nghe báº¡n kiá»‡t sá»©c quÃ¡! ğŸ˜¿ Uá»‘ng má»™t cá»‘c nÆ°á»›c vÃ  Äƒn nháº¹, nhÆ° má»™t quáº£ tÃ¡o, Ä‘á»ƒ náº¡p nÄƒng lÆ°á»£ng nhÃ©!'
      ],
      tiredAlt: [
        'Meo meo! Náº¿u chÆ°a Ä‘á»§, báº¡n thá»­ nghe má»™t bÃ i nháº¡c yÃªu thÃ­ch Ä‘á»ƒ refresh tinh tháº§n xem? ğŸ˜º CÃ³ tháº¥y tá»‘t hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ Ä‘á»©ng dáº­y vÆ°Æ¡n vai vÃ  Ä‘i láº¡i 5 phÃºt Ä‘á»ƒ cÆ¡ thá»ƒ tá»‰nh tÃ¡o hÆ¡n nhÃ©? ğŸ˜º'
      ],
      plan: [
        'Meow! Muá»‘n láº­p káº¿ hoáº¡ch háº£? ğŸ˜º HÃ£y thá»­ Ä‘áº·t má»¥c tiÃªu nhá»: má»—i ngÃ y há»c 1 chÆ°Æ¡ng, vÃ  ghi vÃ o lá»‹ch Ä‘á»ƒ theo dÃµi!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n cáº§n káº¿ hoáº¡ch Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng chia nhá» cÃ´ng viá»‡c, má»—i ngÃ y lÃ m 1 pháº§n thÃ´i Ä‘á»ƒ Ä‘á»¡ Ã¡p lá»±c?'
      ],
      planAlt: [
        'Meo meo! Náº¿u chÆ°a há»£p, báº¡n thá»­ dÃ nh 10 phÃºt má»—i tá»‘i Ä‘á»ƒ lÃªn káº¿ hoáº¡ch cho ngÃ y mai nhÃ©? ğŸ˜º CÃ³ tháº¥y dá»… hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ dÃ¹ng sá»• tay Ä‘á»ƒ ghi chÃº cÃ´ng viá»‡c vÃ  Ä‘Ã¡nh dáº¥u khi hoÃ n thÃ nh? ğŸ˜º'
      ],
      relax: [
        'Meow! Cáº§n thÆ° giÃ£n háº£? ğŸ˜º HÃ£y thá»­ xem má»™t video vui trÃªn YouTube, hoáº·c nghe má»™t bÃ i nháº¡c chill nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Muá»‘n thÆ° giÃ£n Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng thá»­ váº½ nguá»‡ch ngoáº¡c hoáº·c viáº¿t nháº­t kÃ½ Ä‘á»ƒ Ä‘áº§u Ã³c thoáº£i mÃ¡i hÆ¡n?'
      ],
      relaxAlt: [
        'Meo meo! Náº¿u chÆ°a á»•n, báº¡n thá»­ ngá»“i thiá»n 5 phÃºt, táº­p trung vÃ o hÆ¡i thá»Ÿ xem? ğŸ˜º Cáº£m giÃ¡c tháº¿ nÃ o?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ nghe podcast nháº¹ nhÃ ng hoáº·c tiáº¿ng mÆ°a rÆ¡i Ä‘á»ƒ thÆ° giÃ£n nhÃ©? ğŸ˜º'
      ],
      study: [
        'Meow! Há»c hÃ nh khÃ³ khÄƒn háº£? ğŸ˜¿ HÃ£y thá»­ chia nhá» bÃ i há»c, má»—i ngÃ y 1 pháº§n, vÃ  ghi chÃº báº±ng sÆ¡ Ä‘á»“ tÆ° duy nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n muá»‘n há»c tá»‘t hÆ¡n Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng thá»­ phÆ°Æ¡ng phÃ¡p Feynman: giáº£i thÃ­ch bÃ i nhÆ° dáº¡y ngÆ°á»i khÃ¡c?'
      ],
      studyAlt: [
        'Meo meo! Náº¿u chÆ°a há»£p, báº¡n thá»­ Ä‘áº·t háº¹n giá» 25 phÃºt há»c, 5 phÃºt nghá»‰ (Pomodoro) Ä‘á»ƒ giá»¯ táº­p trung nhÃ©? ğŸ˜º',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ há»c á»Ÿ nÆ¡i yÃªn tÄ©nh, khÃ´ng cÃ³ Ä‘á»“ gÃ¢y xao nhÃ£ng xem? ğŸ˜º CÃ³ tháº¥y dá»… hÆ¡n khÃ´ng?'
      ],
      motivation: [
        'Meow! Cáº§n Ä‘á»™ng lá»±c háº£? Báº¡n giá»i láº¯m, cá»© tiáº¿n tá»«ng bÆ°á»›c nhá» lÃ  Ä‘Æ°á»£c! ğŸ˜º HÃ£y thá»­ Ä‘áº·t má»¥c tiÃªu nhá», nhÆ° há»c 1 trang, rá»“i tá»± thÆ°á»Ÿng nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Nghe báº¡n chÃ¡n há»c nhá»‰? ğŸ˜¿ Sao khÃ´ng thá»­ nhá»› láº¡i lÃ½ do báº¡n báº¯t Ä‘áº§u, vÃ  tá»± nhá»§ báº¡n Ä‘ang tiáº¿n bá»™ má»—i ngÃ y?'
      ],
      motivationAlt: [
        'Meo meo! Náº¿u chÆ°a Ä‘á»§ Ä‘á»™ng lá»±c, báº¡n thá»­ tá»± thÆ°á»Ÿng sau khi há»c xong, nhÆ° Äƒn má»™t thanh káº¹o? ğŸ˜º CÃ³ tháº¥y há»©ng thÃº hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ xem má»™t video truyá»n cáº£m há»©ng, hoáº·c Ä‘á»c quote tÃ­ch cá»±c xem? ğŸ˜º'
      ],
      focus: [
        'Meow! KhÃ´ng táº­p trung Ä‘Æ°á»£c háº£? ğŸ˜¿ HÃ£y thá»­ Ä‘á»ƒ Ä‘iá»‡n thoáº¡i xa má»™t chÃºt, vÃ  há»c á»Ÿ nÆ¡i yÃªn tÄ©nh nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n bá»‹ phÃ¢n tÃ¢m Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng thá»­ Ä‘áº·t háº¹n giá» 25 phÃºt táº­p trung, rá»“i nghá»‰ 5 phÃºt?'
      ],
      focusAlt: [
        'Meo meo! Náº¿u váº«n khÃ³ táº­p trung, báº¡n thá»­ dÃ¹ng á»©ng dá»¥ng cháº·n máº¡ng xÃ£ há»™i trong 1 giá» xem? ğŸ˜º CÃ³ á»•n hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ dá»n sáº¡ch bÃ n há»c, Ä‘á»ƒ khÃ´ng cÃ³ Ä‘á»“ gÃ¢y xao nhÃ£ng nhÃ©? ğŸ˜º'
      ],
      schedule: [
        'Meow! Cáº§n lá»‹ch há»c háº£? ğŸ˜º HÃ£y thá»­ chia thá»i gian: má»—i mÃ´n 1-2 giá»/ngÃ y, xen káº½ mÃ´n khÃ³ vÃ  dá»… Ä‘á»ƒ Ä‘á»¡ chÃ¡n!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n muá»‘n láº­p lá»‹ch há»c Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng thá»­ há»c mÃ´n khÃ³ vÃ o buá»•i sÃ¡ng, khi Ä‘áº§u Ã³c tá»‰nh tÃ¡o nháº¥t?'
      ],
      scheduleAlt: [
        'Meo meo! Náº¿u chÆ°a há»£p, báº¡n thá»­ dÃ nh 30 phÃºt cuá»‘i ngÃ y Ä‘á»ƒ Ã´n láº¡i táº¥t cáº£ nhÃ©? ğŸ˜º CÃ³ tháº¥y hiá»‡u quáº£ hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ Ä‘áº·t thá»i gian cá»‘ Ä‘á»‹nh cho tá»«ng mÃ´n, nhÆ° ToÃ¡n 8h-9h, Anh 9h-10h xem? ğŸ˜º'
      ],
      sad: [
        'Meow! Báº¡n buá»“n háº£? MÃ¬nh á»Ÿ Ä‘Ã¢y vá»›i báº¡n nÃ¨! ğŸ˜º HÃ£y thá»­ nÃ³i chuyá»‡n vá»›i má»™t ngÆ°á»i báº¡n thÃ¢n, hoáº·c nghe nháº¡c yÃªu thÃ­ch nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Nghe báº¡n khÃ´ng vui nhá»‰? ğŸ˜¿ Sao khÃ´ng thá»­ lÃ m viá»‡c báº¡n thÃ­ch, nhÆ° xem phim hoáº·c Äƒn mÃ³n yÃªu thÃ­ch?'
      ],
      sadAlt: [
        'Meo meo! Náº¿u chÆ°a vui hÆ¡n, báº¡n thá»­ viáº¿t cáº£m xÃºc ra giáº¥y, hoáº·c Ä‘i dáº¡o má»™t chÃºt xem? ğŸ˜º Cáº£m giÃ¡c tháº¿ nÃ o?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ xem má»™t video hÃ i, hoáº·c chÆ¡i vá»›i thÃº cÆ°ng náº¿u cÃ³ nhÃ©? ğŸ˜º'
      ],
      examStress: [
        'Meow! Lo láº¯ng thi cá»­ háº£? Äá»«ng lo, mÃ¬nh giÃºp báº¡n! ğŸ˜º HÃ£y thá»­ Ã´n táº­p má»—i ngÃ y 1-2 chÆ°Æ¡ng, vÃ  ngá»§ Ä‘á»§ giáº¥c, Ä‘á»«ng thá»©c khuya nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n Ã¡p lá»±c vÃ¬ thi Ä‘Ãºng khÃ´ng? ğŸ˜¿ Sao khÃ´ng thá»­ thá»±c hÃ nh Ä‘á» thi thá»­ Ä‘á»ƒ quen vá»›i Ã¡p lá»±c?'
      ],
      examStressAlt: [
        'Meo meo! Náº¿u váº«n lo, báº¡n thá»­ hÃ­t thá»Ÿ sÃ¢u trÆ°á»›c khi há»c: hÃ­t 4 giÃ¢y, giá»¯ 7 giÃ¢y, thá»Ÿ ra 8 giÃ¢y nhÃ©? ğŸ˜º CÃ³ tháº¥y bÃ¬nh tÄ©nh hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ Ä‘áº·t má»¥c tiÃªu nhá», nhÆ° hÃ´m nay Ã´n 1 chÆ°Æ¡ng thÃ´i, Ä‘á»ƒ Ä‘á»¡ Ã¡p lá»±c xem? ğŸ˜º'
      ],
      timeManagement: [
        'Meow! Cáº§n quáº£n lÃ½ thá»i gian háº£? ğŸ˜º HÃ£y thá»­ dÃ¹ng Ma tráº­n Eisenhower Ä‘á»ƒ Æ°u tiÃªn viá»‡c quan trá»ng trÆ°á»›c nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n muá»‘n quáº£n lÃ½ thá»i gian tá»‘t hÆ¡n Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng thá»­ chia nhá» cÃ´ng viá»‡c vÃ  Ä‘áº·t thá»i háº¡n rÃµ rÃ ng?'
      ],
      timeManagementAlt: [
        'Meo meo! Náº¿u chÆ°a há»£p, báº¡n thá»­ Ä‘áº·t háº¹n giá» 25 phÃºt lÃ m viá»‡c, 5 phÃºt nghá»‰ (Pomodoro) xem? ğŸ˜º CÃ³ tháº¥y hiá»‡u quáº£ hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ ghi cÃ´ng viá»‡c vÃ o sá»• tay, vÃ  Ä‘Ã¡nh dáº¥u khi hoÃ n thÃ nh Ä‘á»ƒ dá»… theo dÃµi nhÃ©? ğŸ˜º'
      ],
      overwhelmed: [
        'Meow! Cáº£m tháº¥y quÃ¡ táº£i háº£? Äá»«ng lo, mÃ¬nh á»Ÿ Ä‘Ã¢y! ğŸ˜º HÃ£y thá»­ liá»‡t kÃª táº¥t cáº£ viá»‡c cáº§n lÃ m, rá»“i lÃ m tá»«ng viá»‡c má»™t nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n bá»‹ ngáº­p viá»‡c Ä‘Ãºng khÃ´ng? ğŸ˜¿ Sao khÃ´ng thá»­ nghá»‰ 5 phÃºt sau má»—i 25 phÃºt lÃ m viá»‡c Ä‘á»ƒ Ä‘áº§u Ã³c nháº¹ nhÃ ng hÆ¡n?'
      ],
      overwhelmedAlt: [
        'Meo meo! Náº¿u váº«n khÃ³, báº¡n thá»­ lÃ m tá»«ng viá»‡c má»™t, Ä‘á»«ng Ä‘a nhiá»‡m nhÃ©? ğŸ˜º Cáº£m giÃ¡c tháº¿ nÃ o?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ giao bá»›t viá»‡c cho ngÆ°á»i khÃ¡c, hoáº·c lÃ m viá»‡c quan trá»ng nháº¥t trÆ°á»›c xem? ğŸ˜º'
      ],
      procrastination: [
        'Meow! TrÃ¬ hoÃ£n háº£? MÃ¬nh giÃºp báº¡n báº¯t Ä‘áº§u nhÃ©! ğŸ˜º HÃ£y thá»­ Ä‘áº·t háº¹n giá» 5 phÃºt Ä‘á»ƒ báº¯t Ä‘áº§u, chá»‰ lÃ m viá»‡c nhá» thÃ´i!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n hay trÃ¬ hoÃ£n Ä‘Ãºng khÃ´ng? ğŸ˜¿ Sao khÃ´ng thá»­ báº¯t Ä‘áº§u báº±ng viá»‡c dá»… nháº¥t, nhÆ° Ä‘á»c 1 trang sÃ¡ch?'
      ],
      procrastinationAlt: [
        'Meo meo! Náº¿u chÆ°a báº¯t Ä‘áº§u Ä‘Æ°á»£c, báº¡n thá»­ tá»± thÆ°á»Ÿng sau khi hoÃ n thÃ nh, nhÆ° Äƒn snack yÃªu thÃ­ch xem? ğŸ˜º CÃ³ tháº¥y há»©ng thÃº hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ Ä‘áº·t má»¥c tiÃªu nhá», nhÆ° lÃ m 5 phÃºt thÃ´i, rá»“i tÄƒng dáº§n lÃªn nhÃ©? ğŸ˜º'
      ],
      math: [
        'Meow! Há»c mÃ´n toÃ¡n háº£? ğŸ˜º HÃ£y thá»­ lÃ m bÃ i táº­p tá»« dá»… Ä‘áº¿n khÃ³, má»—i ngÃ y 5-10 bÃ i Ä‘á»ƒ quen dáº§n nhÃ©!',
        'MÃ¨o Ä‘Ã¢y! Báº¡n muá»‘n há»c toÃ¡n tá»‘t hÆ¡n Ä‘Ãºng khÃ´ng? ğŸ˜º Sao khÃ´ng thá»­ xem video giáº£i thÃ­ch trÃªn YouTube náº¿u chÆ°a hiá»ƒu?'
      ],
      mathAlt: [
        'Meo meo! Náº¿u chÆ°a há»£p, báº¡n thá»­ thá»±c hÃ nh má»—i ngÃ y 5-10 bÃ i, vÃ  ghi chÃº cÃ¡c cÃ´ng thá»©c quan trá»ng xem? ğŸ˜º CÃ³ tháº¥y dá»… hÆ¡n khÃ´ng?',
        'MÃ¨o Ä‘Ã¢y! Váº­y báº¡n thá»­ há»c cÃ¹ng báº¡n bÃ¨, hoáº·c nhá» tháº§y cÃ´ giáº£i Ä‘Ã¡p chá»— khÃ³ nhÃ©? ğŸ˜º'
      ],
      yes: ['Meow! Váº­y mÃ¬nh tiáº¿p tá»¥c gá»£i Ã½ nhÃ©! ğŸ˜º'],
      no: [
        'Meo meo! Váº­y Ä‘á»ƒ mÃ¬nh gá»£i Ã½ cÃ¡ch khÃ¡c nhÃ©! ğŸ˜º',
        'MÃ¨o Ä‘Ã¢y! KhÃ´ng sao, mÃ¬nh cÃ³ Ã½ khÃ¡c cho báº¡n nÃ¨! ğŸ˜º'
      ],
      default: [
        'Meow! MÃ¬nh chÆ°a hiá»ƒu láº¯m, báº¡n nÃ³i thÃªm chÃºt Ä‘Æ°á»£c khÃ´ng? ğŸ˜º Báº¡n Ä‘ang lo vá» há»c táº­p, thá»i gian hay cáº£m xÃºc?',
        'MÃ¨o Ä‘Ã¢y! HÃ¬nh nhÆ° mÃ¬nh chÆ°a rÃµ Ã½ báº¡n, báº¡n nÃ³i thÃªm nhÃ©? ğŸ˜º Báº¡n cáº§n giÃºp gÃ¬ nÃ o?'
      ]
    };

    function quickQuestion(question) {
      document.getElementById('userInput').value = question;
      sendMessage();
    }

    function sendMessage() {
      const input = document.getElementById('userInput').value.toLowerCase();
      const chatbox = document.getElementById('chatbox');
      chatbox.innerHTML += `<p><strong>Báº¡n:</strong> ${input}</p>`;
      chatbox.innerHTML += `<p><strong>MÃ¨o Thá»i Gian:</strong> <span class="typing-indicator"><span>.</span><span>.</span><span>.</span></span></p>`;
      chatbox.scrollTop = chatbox.scrollHeight;

      setTimeout(() => {
        let reply = responses.default[Math.floor(Math.random() * responses.default.length)];
        let emotion = 'happy';
        let suggestionIndex = 0;

        // QuÃ©t tá»« khÃ³a má»Ÿ rá»™ng
        if (input.includes('báº­n') || input.includes('nhiá»u viá»‡c') || input.includes('deadline') || input.includes('quÃ¡ táº£i')) {
          reply = responses.busy[suggestionIndex = Math.floor(Math.random() * responses.busy.length)];
          currentTopic = 'busy';
          emotion = 'sad';
          lastSuggestion = 'busy' + suggestionIndex;
        } else if (input.includes('cÄƒng tháº³ng') || input.includes('Ã¡p lá»±c') || input.includes('stress') || input.includes('lo láº¯ng')) {
          reply = responses.stress[suggestionIndex = Math.floor(Math.random() * responses.stress.length)];
          currentTopic = 'stress';
          emotion = 'worried';
          lastSuggestion = 'stress' + suggestionIndex;
        } else if (input.includes('cÃ¢n báº±ng') || input.includes('há»c vÃ  chÆ¡i') || input.includes('há»c vá»›i chÆ¡i')) {
          reply = responses.balance[suggestionIndex = Math.floor(Math.random() * responses.balance.length)];
          currentTopic = 'balance';
          lastSuggestion = 'balance' + suggestionIndex;
        } else if (input.includes('má»‡t má»i') || input.includes('kiá»‡t sá»©c') || input.includes('má»‡t')) {
          reply = responses.tired[suggestionIndex = Math.floor(Math.random() * responses.tired.length)];
          currentTopic = 'tired';
          emotion = 'sad';
          lastSuggestion = 'tired' + suggestionIndex;
        } else if (input.includes('káº¿ hoáº¡ch') || input.includes('quáº£n lÃ½') || input.includes('lá»‹ch') || input.includes('lÃªn káº¿ hoáº¡ch')) {
          reply = responses.plan[suggestionIndex = Math.floor(Math.random() * responses.plan.length)];
          currentTopic = 'plan';
          lastSuggestion = 'plan' + suggestionIndex;
        } else if (input.includes('thÆ° giÃ£n') || input.includes('nghá»‰ ngÆ¡i') || input.includes('thoáº£i mÃ¡i')) {
          reply = responses.relax[suggestionIndex = Math.floor(Math.random() * responses.relax.length)];
          currentTopic = 'relax';
          lastSuggestion = 'relax' + suggestionIndex;
        } else if (input.includes('há»c') || input.includes('bÃ i táº­p') || input.includes('há»c tá»‘t') || input.includes('kiáº¿n thá»©c')) {
          reply = responses.study[suggestionIndex = Math.floor(Math.random() * responses.study.length)];
          currentTopic = 'study';
          emotion = 'sad';
          lastSuggestion = 'study' + suggestionIndex;
        } else if (input.includes('Ä‘á»™ng lá»±c') || input.includes('chÃ¡n') || input.includes('khÃ´ng muá»‘n há»c') || input.includes('má»¥c tiÃªu')) {
          reply = responses.motivation[suggestionIndex = Math.floor(Math.random() * responses.motivation.length)];
          currentTopic = 'motivation';
          emotion = 'excited';
          lastSuggestion = 'motivation' + suggestionIndex;
        } else if (input.includes('táº­p trung') || input.includes('phÃ¢n tÃ¢m') || input.includes('xao nhÃ£ng')) {
          reply = responses.focus[suggestionIndex = Math.floor(Math.random() * responses.focus.length)];
          currentTopic = 'focus';
          emotion = 'thinking';
          lastSuggestion = 'focus' + suggestionIndex;
        } else if (input.includes('lá»‹ch há»c') || input.includes('há»c theo lá»‹ch')) {
          reply = responses.schedule[suggestionIndex = Math.floor(Math.random() * responses.schedule.length)];
          currentTopic = 'schedule';
          lastSuggestion = 'schedule' + suggestionIndex;
        } else if (input.includes('buá»“n') || input.includes('khÃ´ng vui') || input.includes('chÃ¡n náº£n')) {
          reply = responses.sad[suggestionIndex = Math.floor(Math.random() * responses.sad.length)];
          currentTopic = 'sad';
          emotion = 'sad';
          lastSuggestion = 'sad' + suggestionIndex;
        } else if (input.includes('thi cá»­') || input.includes('thi') || input.includes('kiá»ƒm tra')) {
          reply = responses.examStress[suggestionIndex = Math.floor(Math.random() * responses.examStress.length)];
          currentTopic = 'examStress';
          emotion = 'worried';
          lastSuggestion = 'examStress' + suggestionIndex;
        } else if (input.includes('quÃ¡ táº£i') || input.includes('ngáº­p viá»‡c') || input.includes('nhiá»u quÃ¡')) {
          reply = responses.overwhelmed[suggestionIndex = Math.floor(Math.random() * responses.overwhelmed.length)];
          currentTopic = 'overwhelmed';
          emotion = 'sad';
          lastSuggestion = 'overwhelmed' + suggestionIndex;
        } else if (input.includes('trÃ¬ hoÃ£n') || input.includes('lÆ°á»i') || input.includes('chÆ°a báº¯t Ä‘áº§u')) {
          reply = responses.procrastination[suggestionIndex = Math.floor(Math.random() * responses.procrastination.length)];
          currentTopic = 'procrastination';
          emotion = 'thinking';
          lastSuggestion = 'procrastination' + suggestionIndex;
        } else if (input.includes('mÃ´n toÃ¡n') || input.includes('toÃ¡n')) {
          reply = responses.math[suggestionIndex = Math.floor(Math.random() * responses.math.length)];
          currentTopic = 'math';
          emotion = 'thinking';
          lastSuggestion = 'math' + suggestionIndex;
        } else if (input.includes('giáº£i phÃ¡p') || input.includes('cÃ¡ch nÃ o')) {
          if (input.includes('há»c táº­p') || input.includes('há»c')) {
            reply = responses.study[suggestionIndex = Math.floor(Math.random() * responses.study.length)];
            currentTopic = 'study';
            lastSuggestion = 'study' + suggestionIndex;
          } else if (input.includes('cÄƒng tháº³ng') || input.includes('Ã¡p lá»±c')) {
            reply = responses.stress[suggestionIndex = Math.floor(Math.random() * responses.stress.length)];
            currentTopic = 'stress';
            lastSuggestion = 'stress' + suggestionIndex;
          } else if (input.includes('quáº£n lÃ½ thá»i gian') || input.includes('káº¿ hoáº¡ch')) {
            reply = responses.timeManagement[suggestionIndex = Math.floor(Math.random() * responses.timeManagement.length)];
            currentTopic = 'timeManagement';
            lastSuggestion = 'timeManagement' + suggestionIndex;
          } else if (currentTopic === 'busy') {
            reply = responses.busyAlt[suggestionIndex = Math.floor(Math.random() * responses.busyAlt.length)];
            lastSuggestion = 'busyAlt' + suggestionIndex;
          } else if (currentTopic === 'stress') {
            reply = responses.stressAlt[suggestionIndex = Math.floor(Math.random() * responses.stressAlt.length)];
            lastSuggestion = 'stressAlt' + suggestionIndex;
          } else if (currentTopic === 'balance') {
            reply = responses.balanceAlt[suggestionIndex = Math.floor(Math.random() * responses.balanceAlt.length)];
            lastSuggestion = 'balanceAlt' + suggestionIndex;
          } else if (currentTopic === 'tired') {
            reply = responses.tiredAlt[suggestionIndex = Math.floor(Math.random() * responses.tiredAlt.length)];
            lastSuggestion = 'tiredAlt' + suggestionIndex;
          } else if (currentTopic === 'plan') {
            reply = responses.planAlt[suggestionIndex = Math.floor(Math.random() * responses.planAlt.length)];
            lastSuggestion = 'planAlt' + suggestionIndex;
          } else if (currentTopic === 'relax') {
            reply = responses.relaxAlt[suggestionIndex = Math.floor(Math.random() * responses.relaxAlt.length)];
            lastSuggestion = 'relaxAlt' + suggestionIndex;
          } else if (currentTopic === 'study') {
            reply = responses.studyAlt[suggestionIndex = Math.floor(Math.random() * responses.studyAlt.length)];
            lastSuggestion = 'studyAlt' + suggestionIndex;
          } else if (currentTopic === 'motivation') {
            reply = responses.motivationAlt[suggestionIndex = Math.floor(Math.random() * responses.motivationAlt.length)];
            lastSuggestion = 'motivationAlt' + suggestionIndex;
          } else if (currentTopic === 'focus') {
            reply = responses.focusAlt[suggestionIndex = Math.floor(Math.random() * responses.focusAlt.length)];
            lastSuggestion = 'focusAlt' + suggestionIndex;
          } else if (currentTopic === 'schedule') {
            reply = responses.scheduleAlt[suggestionIndex = Math.floor(Math.random() * responses.scheduleAlt.length)];
            lastSuggestion = 'scheduleAlt' + suggestionIndex;
          } else if (currentTopic === 'sad') {
            reply = responses.sadAlt[suggestionIndex = Math.floor(Math.random() * responses.sadAlt.length)];
            lastSuggestion = 'sadAlt' + suggestionIndex;
          } else if (currentTopic === 'examStress') {
            reply = responses.examStressAlt[suggestionIndex = Math.floor(Math.random() * responses.examStressAlt.length)];
            lastSuggestion = 'examStressAlt' + suggestionIndex;
          } else if (currentTopic === 'overwhelmed') {
            reply = responses.overwhelmedAlt[suggestionIndex = Math.floor(Math.random() * responses.overwhelmedAlt.length)];
            lastSuggestion = 'overwhelmedAlt' + suggestionIndex;
          } else if (currentTopic === 'procrastination') {
            reply = responses.procrastinationAlt[suggestionIndex = Math.floor(Math.random() * responses.procrastinationAlt.length)];
            lastSuggestion = 'procrastinationAlt' + suggestionIndex;
          } else if (currentTopic === 'math') {
            reply = responses.mathAlt[suggestionIndex = Math.floor(Math.random() * responses.mathAlt.length)];
            lastSuggestion = 'mathAlt' + suggestionIndex;
          }
        } else if (input.includes('cÃ³') || input.includes('Ä‘Æ°á»£c') || input.includes('ok') || input.includes('thá»­')) {
          reply = responses.yes[0];
          if (currentTopic === 'busy') {
            reply += responses.busyAlt[suggestionIndex = Math.floor(Math.random() * responses.busyAlt.length)];
            lastSuggestion = 'busyAlt' + suggestionIndex;
          } else if (currentTopic === 'stress') {
            reply += responses.stressAlt[suggestionIndex = Math.floor(Math.random() * responses.stressAlt.length)];
            lastSuggestion = 'stressAlt' + suggestionIndex;
          } else if (currentTopic === 'balance') {
            reply += responses.balanceAlt[suggestionIndex = Math.floor(Math.random() * responses.balanceAlt.length)];
            lastSuggestion = 'balanceAlt' + suggestionIndex;
          } else if (currentTopic === 'tired') {
            reply += responses.tiredAlt[suggestionIndex = Math.floor(Math.random() * responses.tiredAlt.length)];
            lastSuggestion = 'tiredAlt' + suggestionIndex;
          } else if (currentTopic === 'plan') {
            reply += responses.planAlt[suggestionIndex = Math.floor(Math.random() * responses.planAlt.length)];
            lastSuggestion = 'planAlt' + suggestionIndex;
          } else if (currentTopic === 'relax') {
            reply += responses.relaxAlt[suggestionIndex = Math.floor(Math.random() * responses.relaxAlt.length)];
            lastSuggestion = 'relaxAlt' + suggestionIndex;
          } else if (currentTopic === 'study') {
            reply += responses.studyAlt[suggestionIndex = Math.floor(Math.random() * responses.studyAlt.length)];
            lastSuggestion = 'studyAlt' + suggestionIndex;
          } else if (currentTopic === 'motivation') {
            reply += responses.motivationAlt[suggestionIndex = Math.floor(Math.random() * responses.motivationAlt.length)];
            lastSuggestion = 'motivationAlt' + suggestionIndex;
          } else if (currentTopic === 'focus') {
            reply += responses.focusAlt[suggestionIndex = Math.floor(Math.random() * responses.focusAlt.length)];
            lastSuggestion = 'focusAlt' + suggestionIndex;
          } else if (currentTopic === 'schedule') {
            reply += responses.scheduleAlt[suggestionIndex = Math.floor(Math.random() * responses.scheduleAlt.length)];
            lastSuggestion = 'scheduleAlt' + suggestionIndex;
          } else if (currentTopic === 'sad') {
            reply += responses.sadAlt[suggestionIndex = Math.floor(Math.random() * responses.sadAlt.length)];
            lastSuggestion = 'sadAlt' + suggestionIndex;
          } else if (currentTopic === 'examStress') {
            reply += responses.examStressAlt[suggestionIndex = Math.floor(Math.random() * responses.examStressAlt.length)];
            lastSuggestion = 'examStressAlt' + suggestionIndex;
          } else if (currentTopic === 'overwhelmed') {
            reply += responses.overwhelmedAlt[suggestionIndex = Math.floor(Math.random() * responses.overwhelmedAlt.length)];
            lastSuggestion = 'overwhelmedAlt' + suggestionIndex;
          } else if (currentTopic === 'procrastination') {
            reply += responses.procrastinationAlt[suggestionIndex = Math.floor(Math.random() * responses.procrastinationAlt.length)];
            lastSuggestion = 'procrastinationAlt' + suggestionIndex;
          } else if (currentTopic === 'math') {
            reply += responses.mathAlt[suggestionIndex = Math.floor(Math.random() * responses.mathAlt.length)];
            lastSuggestion = 'mathAlt' + suggestionIndex;
          }
        } else if (input.includes('chÆ°a') || input.includes('khÃ´ng') || input.includes('khÃ´ng thÃ­ch') || input.includes('khÃ´ng há»£p')) {
          reply = responses.no[Math.floor(Math.random() * responses.no.length)];
          if (currentTopic === 'busy') {
            const nextIndex = lastSuggestion === 'busy0' ? 1 : 0;
            reply += responses.busyAlt[nextIndex];
            lastSuggestion = 'busyAlt' + nextIndex;
          } else if (currentTopic === 'stress') {
            const nextIndex = lastSuggestion === 'stress0' ? 1 : 0;
            reply += responses.stressAlt[nextIndex];
            lastSuggestion = 'stressAlt' + nextIndex;
          } else if (currentTopic === 'balance') {
            const nextIndex = lastSuggestion === 'balance0' ? 1 : 0;
            reply += responses.balanceAlt[nextIndex];
            lastSuggestion = 'balanceAlt' + nextIndex;
          } else if (currentTopic === 'tired') {
            const nextIndex = lastSuggestion === 'tired0' ? 1 : 0;
            reply += responses.tiredAlt[nextIndex];
            lastSuggestion = 'tiredAlt' + nextIndex;
          } else if (currentTopic === 'plan') {
            const nextIndex = lastSuggestion === 'plan0' ? 1 : 0;
            reply += responses.planAlt[nextIndex];
            lastSuggestion = 'planAlt' + nextIndex;
          } else if (currentTopic === 'relax') {
            const nextIndex = lastSuggestion === 'relax0' ? 1 : 0;
            reply += responses.relaxAlt[nextIndex];
            lastSuggestion = 'relaxAlt' + nextIndex;
          } else if (currentTopic === 'study') {
            const nextIndex = lastSuggestion === 'study0' ? 1 : 0;
            reply += responses.studyAlt[nextIndex];
            lastSuggestion = 'studyAlt' + nextIndex;
          } else if (currentTopic === 'motivation') {
            const nextIndex = lastSuggestion === 'motivation0' ? 1 : 0;
            reply += responses.motivationAlt[nextIndex];
            lastSuggestion = 'motivationAlt' + nextIndex;
          } else if (currentTopic === 'focus') {
            const nextIndex = lastSuggestion === 'focus0' ? 1 : 0;
            reply += responses.focusAlt[nextIndex];
            lastSuggestion = 'focusAlt' + nextIndex;
          } else if (currentTopic === 'schedule') {
            const nextIndex = lastSuggestion === 'schedule0' ? 1 : 0;
            reply += responses.scheduleAlt[nextIndex];
            lastSuggestion = 'scheduleAlt' + nextIndex;
          } else if (currentTopic === 'sad') {
            const nextIndex = lastSuggestion === 'sad0' ? 1 : 0;
            reply += responses.sadAlt[nextIndex];
            lastSuggestion = 'sadAlt' + nextIndex;
          } else if (currentTopic === 'examStress') {
            const nextIndex = lastSuggestion === 'examStress0' ? 1 : 0;
            reply += responses.examStressAlt[nextIndex];
            lastSuggestion = 'examStressAlt' + nextIndex;
          } else if (currentTopic === 'overwhelmed') {
            const nextIndex = lastSuggestion === 'overwhelmed0' ? 1 : 0;
            reply += responses.overwhelmedAlt[nextIndex];
            lastSuggestion = 'overwhelmedAlt' + nextIndex;
          } else if (currentTopic === 'procrastination') {
            const nextIndex = lastSuggestion === 'procrastination0' ? 1 : 0;
            reply += responses.procrastinationAlt[nextIndex];
            lastSuggestion = 'procrastinationAlt' + nextIndex;
          } else if (currentTopic === 'math') {
            const nextIndex = lastSuggestion === 'math0' ? 1 : 0;
            reply += responses.mathAlt[nextIndex];
            lastSuggestion = 'mathAlt' + nextIndex;
          }
        }

        chatbox.removeChild(chatbox.lastElementChild);
        chatbox.innerHTML += `<p><strong>MÃ¨o Thá»i Gian:</strong> ${reply}</p>`;
        chatbox.scrollTop = chatbox.scrollHeight;
        chatHistory.push(input);
        if (chatHistory.length > 5) chatHistory.shift();
        document.getElementById('userInput').value = '';
        updateChatbotImage(emotion);
      }, 1000);
    }

    function updateChatbotImage(emotion) {
      const img = document.getElementById('chatbot-img');
      if (emotion === 'happy') {
        img.src = 'https://images.unsplash.com/photo-1573865526739-10659fec78a5?q=80&w=100&auto=format&fit=crop';
      } else if (emotion === 'sad') {
        img.src = 'https://images.unsplash.com/photo-1596854407944-bf87f6fdd271?q=80&w=100&auto=format&fit=crop';
      } else if (emotion === 'thinking') {
        img.src = 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=100&auto=format&fit=crop';
      } else if (emotion === 'worried') {
        img.src = 'https://images.unsplash.com/photo-1561948955-570b270e7c36?q=80&w=100&auto=format&fit=crop';
      } else if (emotion === 'excited') {
        img.src = 'https://images.unsplash.com/photo-1519336558455-92d701fd9324?q=80&w=100&auto=format&fit=crop';
      }
    }

    // Biá»ƒu Ä‘á»“ vÃ  pháº£n há»“i
    let feedbackCount = JSON.parse(localStorage.getItem('feedbackCount')) || { positive: 0, neutral: 0, negative: 0 };
        let recentFeedback = JSON.parse(localStorage.getItem('recentFeedback')) || [];
        const ctx = document.getElementById('feedbackChart').getContext('2d');
        const chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['HÃ i lÃ²ng', 'BÃ¬nh thÆ°á»ng', 'ChÆ°a hÃ i lÃ²ng'],
            datasets: [{
            label: 'Sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡',
            data: [feedbackCount.positive, feedbackCount.neutral, feedbackCount.negative],
            backgroundColor: ['#34D399', '#FBBF24', '#F87171']
            }]
        },
        options: { scales: { y: { beginAtZero: true } } }
        });

        function submitFeedback() {
        const feedback = document.getElementById('feedbackInput').value;
        const rating = document.getElementById('feedbackRating').value;
        if (!feedback) {
            alert('Vui lÃ²ng nháº­p lá»i nháº¯n!');
            return;
        }

        feedbackCount[rating]++;
        recentFeedback.push({ text: feedback, rating });
        if (recentFeedback.length > 5) recentFeedback.shift();
        
        localStorage.setItem('feedbackCount', JSON.stringify(feedbackCount));
        localStorage.setItem('recentFeedback', JSON.stringify(recentFeedback));
        chart.data.datasets[0].data = [feedbackCount.positive, feedbackCount.neutral, feedbackCount.negative];
        chart.update();
        renderRecentFeedback();
        document.getElementById('feedbackInput').value = '';
        }

        function renderRecentFeedback() {
        const feedbackDiv = document.getElementById('recentFeedback');
        feedbackDiv.innerHTML = '<h4 class="text-lg font-semibold text-gray-800">Lá»i nháº¯n gáº§n Ä‘Ã¢y</h4>';
        recentFeedback.forEach(fb => {
            const div = document.createElement('div');
            div.className = 'p-2 bg-gray-100 rounded mt-2';
            div.textContent = `${fb.text} (${fb.rating === 'positive' ? 'HÃ i lÃ²ng' : fb.rating === 'neutral' ? 'BÃ¬nh thÆ°á»ng' : 'ChÆ°a hÃ i lÃ²ng'})`;
            feedbackDiv.appendChild(div);
        });
        }
        renderRecentFeedback();

        // Tá»‘i Æ°u thao tÃ¡c
        function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
            clearTimeout(timeout);
            func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
        }
        window.addEventListener('resize', debounce(() => {
        chart.resize();
        calendar.render();
        }, 100));
    </script>
    </body>
    </html>